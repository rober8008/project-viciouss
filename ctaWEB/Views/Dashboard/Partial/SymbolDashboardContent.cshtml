@model ctaWEB.Models.SymbolDashboardModel

<div class="row" style="margin-top:10px;">    
    <div class="container">  
        <div class="col-lg-12 text-right"><h6>Precio Actualizado por última vez: @Model.LastTimeSync</h6></div>        
        <div class="col-lg-12 btn-toolbar" role="toolbar" style="border: 1px solid #E4E4E4;padding:5px;border-radius:5px;">
            <div class="btn-group" role="group">
                <div class="col-lg-8"  style="padding-left:0px;padding-right:0px;">
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_month" range="1" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">1M</button>
                    </div>
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_threemonths" range="2" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">3M</button>
                    </div>
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_sixmonths" range="3" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">6M</button>
                    </div>
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_year" range="4" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">1Y</button>
                    </div>
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_threeyears" range="5" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">3Y</button>
                    </div>
                    <div class="col-lg-2" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_all" range="6" type="button" class="chartRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">ALL</button>
                    </div>
                    
                    <div class="col-lg-4" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_daily" range="1" type="button" class="candelRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">Day</button>
                    </div>
                    <div class="col-lg-4" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_weekly" range="2" type="button" class="candelRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">Week</button>
                    </div>
                    <div class="col-lg-4" style="padding-left:0px;padding-right:0px;">
                        <button id="btn_monthly" range="3" type="button" class="candelRangeSelector btn btn-default" style="height:18px;font-size:8px;width:100%;line-height:1px;text-transform:uppercase;">Month</button>
                    </div>                   
                </div>
                <div class="col-lg-4"  style="padding-left:0px;padding-right:0px;margin-top:4px;">
                    <button id="btn_candel_chart" type="button" class="btn btn-default"><img src="~/Images/png/chart_candel.png" /></button>
                    <button id="btn_line_chart" type="button" class="btn btn-default"><img src="~/Images/png/chart_line.png" /></button>
                </div>
            </div>           
            <div class="btn-group" role="group" style="margin-top:4px;">
                <button id="up_arrow" type="button" class="btn btn-default" style="height:36px;"><img src="~/Images/png/arrow_up.png" /></button>
                <button id="down_arrow" type="button" class="btn btn-default" style="height:36px;"><img src="~/Images/png/arrow_down.png" /></button>                
                <button id="left_arrow" type="button" class="btn btn-default" style="height:36px;"><img src="~/Images/png/arrow_left.png" /></button>
                <button id="right_arrow" type="button" class="btn btn-default" style="height:36px;"><img src="~/Images/png/arrow_right.png" /></button>
            </div>
            <div class="btn-group" role="group" style="margin-top:4px;">
                <button type="button" class="btn btn-default" data-toggle="popover-new-indicator" data-placement="right"><img src="~/Images/png/chart_indicator.png" /></button>
                <div class="btn-group">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownIndicators" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <img src="~/Images/png/toolbar_empty.png" width="1" height="20" />
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownIndicators" style="padding:5px;">
                        @{
                            foreach (ctaCOMMON.Indicator.Chart_Indicator item in Model.symbol_content.Symbol_Dashboard.Indicators)
                            {
                                <li id="indicator_listitem_@item.ID">
                                    <div style="float:left;width:90%;"><a href="#">@item.Name</a></div>
                                    <div style="float:left;width:10%;"><span indicator-id="@item.ID" class="delete-indicator glyphicon glyphicon-remove-circle" aria-hidden="true"></span></div>
                                </li>
                            }
                        }
                    </ul>
                </div>
            </div>
            <div class="btn-group" role="group" style="margin-top:4px;">
                <button type="button" class="btn btn-default" data-toggle="popover-new-shape" data-placement="right"><img src="~/Images/png/chart_shape.png" /></button>
                <div class="btn-group">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownShapes" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <img src="~/Images/png/toolbar_empty.png" width="1" height="20" />
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownShapes" style="padding:5px;">
                        @{
                            foreach (ctaCOMMON.Indicator.Shape_Indicator item in Model.symbol_content.Symbol_Dashboard.Shapes)
                            {
                                <li id="shape_listitem_@item.ID">
                                    <div style="float:left;width:90%;"><a href="#">@item.Name</a></div>
                                    <div style="float:left;width:10%;"><span shape-id="@item.ID" class="delete-shape glyphicon glyphicon-remove-circle" aria-hidden="true"></span></div>
                                </li>
                            }
                        }
                    </ul>
                </div>
            </div>            
        </div>
        @Html.Partial("~/Views/Dashboard/Partial/SymbolContent.cshtml", Model.symbol_content)
    </div>
    <!--Popover for New Indicator & Shape-->
    <div id="popover-new-indicator-head" class="hide">
        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="indicator_selector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span id="indicator_selector_text">Indicadores</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="indicator_selector">
                @foreach (ctaCOMMON.Indicator.IndicatorParameter ind in Model.Indicators)
                {
                    <li><a href="#" class="indicator_selector_option" indicator_id="@ind.ID" param1_label="@ind.Param1" color1_label="@ind.Color1" param2_label="@ind.Param2" color2_label="@ind.Color2" param3_label="@ind.Param3" color3_label="@ind.Color3" onclick="IndicatorSelectorChange(this);">@ind.Name</a></li>
                } 
            </ul>
        </div>
    </div>
    <div id="popover-new-indicator-content" class="hide">
        @Html.Partial("~/Views/Dashboard/Partial/AddIndicator.cshtml", new ctaWEB.Models.AddIndicatorModel(Model.portfolio_id, Model.symbol_id, System.Web.HttpContext.Current.User.Identity.Name))
    </div>
    <div id="popover-new-shape-head" class="hide">
        <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="shape_selector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span id="shape_selector_text">Dibujos</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="shape_selector">
                <li><a href="#" class="shape_selector_option" value="1" value_key="Line" onclick="ShapeSelectorChange(this);">Linea</a></li>
                <!--<li><a href="#" class="shape_selector_option" value="2" value_key="Text" onclick="ShapeSelectorChange(this);">Texto</a></li>-->
                <li><a href="#" class="shape_selector_option" value="3" value_key="FibbonacciLineLow" onclick="ShapeSelectorChange(this);">Lineas de Fibbonacci (Bajista)</a></li>
                <li><a href="#" class="shape_selector_option" value="4" value_key="FibbonacciLineHigh" onclick="ShapeSelectorChange(this);">Lineas de Fibbonacci (Alcista)</a></li>
                <li><a href="#" class="shape_selector_option" value="5" value_key="FibbonacciArcsLow" onclick="ShapeSelectorChange(this);">Arcos de Fibbonacci (Bajista)</a></li>
                <li><a href="#" class="shape_selector_option" value="6" value_key="FibbonacciArcsHigh" onclick="ShapeSelectorChange(this);">Arcos de Fibbonacci (Alcista)</a></li>
                <!--<li><a href="#" class="shape_selector_option" value="7" value_key="poligone" onclick="ShapeSelectorChange(this);">Polígono</a></li>-->
            </ul>
        </div>
    </div>
    <div id="popover-new-shape-content" class="hide">
        @Html.Partial("~/Views/Dashboard/Partial/AddShape.cshtml", new ctaWEB.Models.AddShapeModel(Model.portfolio_id, Model.symbol_id, System.Web.HttpContext.Current.User.Identity.Name))
    </div>
</div>

@if (!String.IsNullOrEmpty(ViewBag.ActionValidationError))
{
    <!-- Action Error Modal -->
    <div class="modal fade in" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="display:block;">
        <div class="modal-dialog" role="document" style="width:362px">
            <div class="modal-content">                
                <form class="form-signin wow fadeInUp">
                    <h2 class="form-signin-heading">Límite Superado</h2>
                    <div class="login-wrap" style="padding-bottom:0px;padding-top:10px">
                        <p style="color:rgb(20, 112, 99)">
                            @ViewBag.ActionValidationError <a href="@Url.Action("Rates","Home")"><strong>Suscripciones</strong></a>
                        </p>
                        <div style="text-align:center;">
                            <button id="close_error_modal" class="btn btn-lg btn-login" style="width:138px;background:#CCCCCC;" data-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
}